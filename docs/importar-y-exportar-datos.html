<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Importar y exportar datos | R Tutorial Example</title>
<meta name="author" content="CONAPO">
<meta name="description" content="Hasta ahora, se han trabajado con datos ya existentes en R base o que se han generado por de manera autónoma, sin embargo, lo usual es que se usen datos almacenados en archivos fuera de R. R puede...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 12 Importar y exportar datos | R Tutorial Example">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/dvillasanao/R_Tutorial/importar-y-exportar-datos.html">
<meta property="og:description" content="Hasta ahora, se han trabajado con datos ya existentes en R base o que se han generado por de manera autónoma, sin embargo, lo usual es que se usen datos almacenados en archivos fuera de R. R puede...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Importar y exportar datos | R Tutorial Example">
<meta name="twitter:description" content="Hasta ahora, se han trabajado con datos ya existentes en R base o que se han generado por de manera autónoma, sin embargo, lo usual es que se usen datos almacenados en archivos fuera de R. R puede...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Tutorial Example</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introducción</a></li>
<li><a class="" href="rmarkdown-1.html"><span class="header-section-number">2</span> RMarkdown</a></li>
<li><a class="" href="chunks.html"><span class="header-section-number">3</span> Chunks</a></li>
<li><a class="" href="objetos.html"><span class="header-section-number">4</span> Tipos de variables</a></li>
<li><a class="" href="propiedades-de-los-objetos.html"><span class="header-section-number">5</span> Propiedades de los objetos</a></li>
<li><a class="" href="coerci%C3%B3n-de-objetos.html"><span class="header-section-number">6</span> Coerción de objetos</a></li>
<li><a class="" href="tipos-de-datos.html"><span class="header-section-number">7</span> Tipos de datos</a></li>
<li><a class="" href="funbasicas.html"><span class="header-section-number">8</span> Funciones básicas de R</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">9</span> Loops</a></li>
<li><a class="" href="apply-family.html"><span class="header-section-number">10</span> Apply family</a></li>
<li><a class="" href="directorio-de-trabajo.html"><span class="header-section-number">11</span> Directorio de trabajo</a></li>
<li><a class="active" href="importar-y-exportar-datos.html"><span class="header-section-number">12</span> Importar y exportar datos</a></li>
<li><a class="" href="dplyr-data-manipulation.html"><span class="header-section-number">13</span> Dplyr (Data Manipulation)</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">14</span> ggplot</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="importar-y-exportar-datos" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Importar y exportar datos<a class="anchor" aria-label="anchor" href="#importar-y-exportar-datos"><i class="fas fa-link"></i></a>
</h1>
<p>Hasta ahora, se han trabajado con datos ya existentes en R <em>base</em> o que se han generado por de manera autónoma, sin embargo, lo usual es que se usen datos almacenados en archivos fuera de R.</p>
<p>R puede importar datos de una amplia variedad de tipos de archivo con las funciones <em>base</em> además de que esta capacidad es ampliada con el uso de paquetes específicos.</p>
<p>Cuando se importa un archivo, se están guardando su contenido en la sesión como un objeto. Dependiendo del procedimiento que se usen será el tipo de objeto creado.</p>
<p>De manera análoga, se pueden exportar los objetos de R a archivos dentro de la computadora.</p>
<div id="descargando-datos" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> Descargando datos<a class="anchor" aria-label="anchor" href="#descargando-datos"><i class="fas fa-link"></i></a>
</h2>
<p>Antes de empezar a importar datos, vale la pena señalar que se pueden descargar archivos de internet usando R con la función <code><a href="https://rdrr.io/r/utils/download.file.html">download.file()</a></code>.</p>
<p>De esta manera se tendrpa acceso a una vasta diversidad de fuentes de datos. Entre otras, se podrán descargar los archivos.</p>
<p>La función <code><a href="https://rdrr.io/r/utils/download.file.html">download.file()</a></code> pide como argumento <code>url</code>, la dirección de internet del archivo que se quiere descargar y <code>destfile</code> el nombre que tendrá el archivo en la computadora. Ambos argumentos como cadenas de texto, es decir, entre comillas.</p>
<p>Por ejemplo, para descargar una copia del set <em>iris</em> disponible en el <a href="https://archive.ics.uci.edu"><em>UCI Machine Learning Repository</em></a> se usa la siguiente dirección como argumento <code>url</code>:</p>
<ul>
<li><a href="https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data" class="uri">https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data</a></li>
</ul>
<p>Y se asigna “iris.data” al argumento <code>dest</code>.</p>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data"</span>, </span>
<span>  destfile <span class="op">=</span> <span class="st">"Bases/iris.data"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>El resultado es un archivo llamado “iris.data” en el directorio de trabajo y dentro de la carpeta “Bases”.</p>
<p>Este método funciona con prácticamente todo tipo de archivos, aunque en algunos casos será necesario agregar el argumento <code>method = "wb"</code>, por asegurar que el archivo obtenido funcione correctamente.</p>
</div>
<div id="tablas-datos-rectangulares" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> Tablas (datos rectangulares)<a class="anchor" aria-label="anchor" href="#tablas-datos-rectangulares"><i class="fas fa-link"></i></a>
</h2>
<p>La estructura rectangular, en renglones y columnas, es común y conveniente para el análisis de datos. Se refiere a esta forma de organizar datos como <strong>tabla</strong>. R cuenta con la función genérica <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, que puede leer cualquier tipo de archivo que contenga una tabla.</p>
<p>La condición para que R interprete un archivo como una tabla es que tenga renglones y en cada renglón, los datos estén separados por comas, o algún otro carácter, indicando columnas. Es decir, algo que luzca de la siguiente manera.</p>
<blockquote>
<p>1, 20, 8, 5
1, 31, 6, 5
2, 18, 9, 5
2, 25, 10, 5</p>
</blockquote>
<p>Por supuesto, en lugar de comas se pueden tener puntos y coma, dos puntos, tabuladores o cualquier otro signo de puntuación como <strong>separador</strong> de columnas.</p>
<p>La función <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> acepta un número considerable de argumentos. Los más importantes son los siguientes.</p>
<ul>
<li>
<code>file</code>: La ruta del archivo que se importa, como cadena de texto. Si el archivo se encuentra en el <a href="directorio-de-trabajo.html#directorio-de-trabajo">directorio de trabajo</a>, es suficiente dar el nombre del archivo, sin la ruta completa.<br>
</li>
<li>
<code>header</code>: Si el archivo tiene encabezados, para ser interpretados como nombres de columna, se define este argumento como <code>TRUE</code>.</li>
<li>
<code>sep</code>: El carácter que es usado como separador de columnas. Por defecto es “;”.</li>
<li>
<code>col.names</code>: Un vector opcional, de tipo carácter, con los nombres de las columnas en la tabla.<br>
</li>
<li>
<code>stringsAsFactors</code>: Esta función convierte automáticamente los datos de texto a factores. Si este no es el comportamiento que se desea, se define este argumento como <code>FALSE</code>.</li>
</ul>
<p>Se pueden consultar todos los argumentos de esta función ejecutando <code><a href="https://rdrr.io/r/utils/read.table.html">?read.table</a></code> en la consola.</p>
<p>Es importante señalar que el objeto obtenido al usar esta función es siempre un <strong>data frame</strong>.</p>
<p>Ejemplo, con un archivo con extensión “.data”, descargado desde el repositorio de <a href="https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+(Diagnostic)">Machine Learning Repository</a>.</p>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data"</span>, </span>
<span>  dest <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.data"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Estos datos pertenecen a una base de diagnósticos de cáncer mamario de la Universidad de Wisconsin, usado para probar métodos de aprendizaje automático. Se puede encontrar la información completa sobre este conjunto de datos en el siguiente enlace:</p>
<ul>
<li>
<a href="https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+%28Diagnostic%29" class="uri">https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+%28Diagnostic%29</a>
Se usa sin especificar ningún otro argumento.</li>
</ul>
<div class="sourceCode" id="cb247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.data"</span><span class="op">)</span></span></code></pre></div>
<p>Veamos los primeros renglones de la base de datos usando la función <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code></p>
<div class="sourceCode" id="cb248"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">##                               V1</span></span>
<span><span class="co">## 1    1000025,5,1,1,1,2,1,3,1,1,2</span></span>
<span><span class="co">## 2   1002945,5,4,4,5,7,10,3,2,1,2</span></span>
<span><span class="co">## 3    1015425,3,1,1,1,2,2,3,1,1,2</span></span>
<span><span class="co">## 4    1016277,6,8,8,1,3,4,3,7,1,2</span></span>
<span><span class="co">## 5    1017023,4,1,1,3,2,1,3,1,1,2</span></span>
<span><span class="co">## 6 1017122,8,10,10,8,7,10,9,7,1,4</span></span></code></pre></div>
<p>Los datos no lucen particularmente bien. Se necesitan ajustar algunos parámetros al importarlos.</p>
<p>No hay datos de encabezado, por lo que <code>header</code> será igual a <code>FALSE</code> y el separador de columnas es una coma, así que el valor de <code>sep</code> será “,”. No se conoce cuál es el nombre de las columnas, así que por el momento no se proporcionan uno.</p>
<div class="sourceCode" id="cb249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.data"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">##        V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11</span></span>
<span><span class="co">## 1 1000025  5  1  1  1  2  1  3  1   1   2</span></span>
<span><span class="co">## 2 1002945  5  4  4  5  7 10  3  2   1   2</span></span>
<span><span class="co">## 3 1015425  3  1  1  1  2  2  3  1   1   2</span></span>
<span><span class="co">## 4 1016277  6  8  8  1  3  4  3  7   1   2</span></span>
<span><span class="co">## 5 1017023  4  1  1  3  2  1  3  1   1   2</span></span>
<span><span class="co">## 6 1017122  8 10 10  8  7 10  9  7   1   4</span></span></code></pre></div>
<p>Los nombres de las columnas son poco descriptivos. Si no damos nombres de variables, cada columna tendrá como nombre “V” seguida de números del 1 adelante.</p>
<p>Para este ejemplo, se cuenta con un archivo de información, que describe el contenido de los datos que se han importado.</p>
<ul>
<li><a href="https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.names" class="uri">https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.names</a></li>
</ul>
<p>Si descargas este archivo, se puede abrirlo usando el bloc o navegador de internet de la computadora.</p>
<p>Se guargan en un vector las abreviaturas de los nombres de columna descritos en el documento anterior.</p>
<div class="sourceCode" id="cb250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"clump_t"</span>, <span class="st">"u_csize"</span>, <span class="st">"u_cshape"</span>, <span class="st">"m_adh"</span>, <span class="st">"spcs"</span>, <span class="st">"b_nuc"</span>, </span>
<span>             <span class="st">"b_chr"</span>, <span class="st">"n_nuc"</span>, <span class="st">"mit"</span>, <span class="st">"class"</span><span class="op">)</span></span></code></pre></div>
<p>Ahora se usa este vector como argumento <code>col.names</code> en <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, para importar els datos con nombres de columna.</p>
<div class="sourceCode" id="cb251"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.data"</span>, header <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>                       col.names <span class="op">=</span> <span class="va">nombres</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">##        id clump_t u_csize u_cshape m_adh spcs b_nuc b_chr n_nuc mit class</span></span>
<span><span class="co">## 1 1000025       5       1        1     1    2     1     3     1   1     2</span></span>
<span><span class="co">## 2 1002945       5       4        4     5    7    10     3     2   1     2</span></span>
<span><span class="co">## 3 1015425       3       1        1     1    2     2     3     1   1     2</span></span>
<span><span class="co">## 4 1016277       6       8        8     1    3     4     3     7   1     2</span></span>
<span><span class="co">## 5 1017023       4       1        1     3    2     1     3     1   1     2</span></span>
<span><span class="co">## 6 1017122       8      10       10     8    7    10     9     7   1     4</span></span></code></pre></div>
<p>La base de datos ha sido importada correctamente. Además, el objeto resultante es un data frame.</p>
<div class="sourceCode" id="cb252"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">## [1] "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">## 'data.frame':    699 obs. of  11 variables:</span></span>
<span><span class="co">##  $ id      : int  1000025 1002945 1015425 1016277 1017023 1017122 1018099 1018561 1033078 1033078 ...</span></span>
<span><span class="co">##  $ clump_t : int  5 5 3 6 4 8 1 2 2 4 ...</span></span>
<span><span class="co">##  $ u_csize : int  1 4 1 8 1 10 1 1 1 2 ...</span></span>
<span><span class="co">##  $ u_cshape: int  1 4 1 8 1 10 1 2 1 1 ...</span></span>
<span><span class="co">##  $ m_adh   : int  1 5 1 1 3 8 1 1 1 1 ...</span></span>
<span><span class="co">##  $ spcs    : int  2 7 2 3 2 7 2 2 2 2 ...</span></span>
<span><span class="co">##  $ b_nuc   : chr  "1" "10" "2" "4" ...</span></span>
<span><span class="co">##  $ b_chr   : int  3 3 3 3 3 9 3 3 1 2 ...</span></span>
<span><span class="co">##  $ n_nuc   : int  1 2 1 7 1 7 1 1 1 1 ...</span></span>
<span><span class="co">##  $ mit     : int  1 1 1 1 1 1 1 1 5 1 ...</span></span>
<span><span class="co">##  $ class   : int  2 2 2 2 2 4 2 2 2 2 ...</span></span></code></pre></div>
<div id="archivos-csv" class="section level3" number="12.2.1">
<h3>
<span class="header-section-number">12.2.1</span> Archivos CSV<a class="anchor" aria-label="anchor" href="#archivos-csv"><i class="fas fa-link"></i></a>
</h3>
<p>Un caso particular de las tablas, son los archivos separados por comas, con extensión <strong>.csv</strong>, por <em>Comma Separated Values</em>, sus siglas en inglés. Este es un tipo de archivo comúnmente son usados para compartir datos, pues es compatible con una amplia variedad de sistemas diferentes además de que ocupa relativamente poco espacio de almacenamiento.</p>
<p>Este tipo de archivos también se pueden importar usando la función <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>.</p>
<p>Se prueba descargando los mismos datos que en el ejemplo anterior, pero almacenados en un archivo con extensión <strong>.csv</strong>.</p>
<div class="sourceCode" id="cb253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data"</span>, </span>
<span>  dest <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Se puede usar <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> con los mismos argumentos que en el ejemplo anterior, con la excepción de que este archivo sí tiene encabezados de columna, por lo que cambiamos <code>header</code> de <code>FALSE</code> a <code>TRUE</code>.</p>
<div class="sourceCode" id="cb254"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/breast-cancer-wis.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>                      col.names <span class="op">=</span> <span class="va">nombres</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">##        id clump_t u_csize u_cshape m_adh spcs b_nuc b_chr n_nuc mit class</span></span>
<span><span class="co">## 1 1002945       5       4        4     5    7    10     3     2   1     2</span></span>
<span><span class="co">## 2 1015425       3       1        1     1    2     2     3     1   1     2</span></span>
<span><span class="co">## 3 1016277       6       8        8     1    3     4     3     7   1     2</span></span>
<span><span class="co">## 4 1017023       4       1        1     3    2     1     3     1   1     2</span></span>
<span><span class="co">## 5 1017122       8      10       10     8    7    10     9     7   1     4</span></span>
<span><span class="co">## 6 1018099       1       1        1     1    2    10     3     1   1     2</span></span></code></pre></div>
<p>Una ventaja de usar documentos con extensión <strong>.csv</strong> es la posibilidad de usar la función <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>. Esta es una es una versión de <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, optimizada para importar archivos <strong>.csv</strong>.</p>
<p><code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> acepta los mismos argumentos que <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, pero al usarla con un archivo <strong>.csv</strong>, en casi todo los casos, no hará falta especificar nada salvo la ruta del archivo.</p>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"Bases/breast-cancer-wis.csv"</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bcancer</span><span class="op">)</span></span>
<span><span class="co">##   X1000025 X5 X1 X1.1 X1.2 X2 X1.3 X3 X1.4 X1.5 X2.1</span></span>
<span><span class="co">## 1  1002945  5  4    4    5  7   10  3    2    1    2</span></span>
<span><span class="co">## 2  1015425  3  1    1    1  2    2  3    1    1    2</span></span>
<span><span class="co">## 3  1016277  6  8    8    1  3    4  3    7    1    2</span></span>
<span><span class="co">## 4  1017023  4  1    1    3  2    1  3    1    1    2</span></span>
<span><span class="co">## 5  1017122  8 10   10    8  7   10  9    7    1    4</span></span>
<span><span class="co">## 6  1018099  1  1    1    1  2   10  3    1    1    2</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> también devuelve un data frame como resultado.</p>
</div>
</div>
<div id="archivos-con-una-estructura-desconocida" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Archivos con una estructura desconocida<a class="anchor" aria-label="anchor" href="#archivos-con-una-estructura-desconocida"><i class="fas fa-link"></i></a>
</h2>
<p>Habrá ocasiones en las que no se están seguros del contenido de los archivos que se desea importar. En estos casos, se puede pedirle a R que intente abrir el archivo en cuestión, usando la función <code><a href="https://rdrr.io/r/base/file.show.html">file.show()</a></code>.</p>
<p>Por ejemplo, abrir el archivo con extensión <strong>.csv</strong> que se importo con anterioridad.</p>
<div class="sourceCode" id="cb256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html">file.show</a></span><span class="op">(</span><span class="st">"Bases/breast-cancer-wis.csv"</span><span class="op">)</span></span></code></pre></div>
<p>R intentará usar el programa que en el equipo, por defecto, abre el tipo de archivo que se le ha indicado. Si no tenemos un programa configurado para abrir el tipo de archivo que se desea, el sistema operativo nos pedirá que elijamos uno.</p>
<p>Lo anterior puede ocurrir si se intenta abrir el archivo con extensión <strong>.data</strong> que se han importado en este capítulo.</p>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html">file.show</a></span><span class="op">(</span><span class="st">"Bases/breast-cancer-wis.data"</span><span class="op">)</span></span></code></pre></div>
<p>Se puede usar la función <code><a href="https://rdrr.io/r/base/readLines.html">readLines()</a></code> para leer un archivo línea por línea. Se establece el argumento <code>n = 4</code> para obtener sólo los primeros cuatro renglones del documento.</p>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="st">"Bases/breast-cancer-wis.data"</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "1000025,5,1,1,1,2,1,3,1,1,2"  "1002945,5,4,4,5,7,10,3,2,1,2" "1015425,3,1,1,1,2,2,3,1,1,2" 
## [4] "1016277,6,8,8,1,3,4,3,7,1,2"</code></pre>
<p>La salida es una lista de vectores, uno por linea en el archivo.</p>
<p>Observando la salida de <code><a href="https://rdrr.io/r/base/readLines.html">readLines()</a></code> se puede determinar si el archivo de nuestro interés puede ser importado usando algunos de los métodos que se han revisado o se necesitarán de herramientas diferentes.</p>
<p>El documento “R Data Import/Export” (R Core Team, 2018) contiene una guía avanzada sobre el proceso de importar y exportar todo tipo de datos. Puedes consultarlo en el siguiente enlace:</p>
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-data.pdf" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-data.pdf</a></li>
</ul>
</div>
<div id="exportar-datos" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> Exportar datos<a class="anchor" aria-label="anchor" href="#exportar-datos"><i class="fas fa-link"></i></a>
</h2>
<p>Un paso muy importante en el trabajo con R es exportar los datos que se han generado, ya sea para que sean usados por otras personas o para almacenar información en el disco duro en lugar de el RAM.</p>
<p>Dependiendo del tipo de estructura de dato en el que se encuentran contenidos la base datos son las opciones que tenemos para exportarlos.</p>
<div id="data-frames-y-matrices" class="section level3" number="12.4.1">
<h3>
<span class="header-section-number">12.4.1</span> Data frames y matrices<a class="anchor" aria-label="anchor" href="#data-frames-y-matrices"><i class="fas fa-link"></i></a>
</h3>
<p>Si los datos se encuentran contenidos en una estructura de datos rectangular, se pueden exportarlos con diferentes funciones.</p>
<p>De manera análoga a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, la función <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> permite exportar matrices o data frames, como archivos de texto con distintas extensiones.</p>
<p>Los argumentos más usados de <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> son los siguientes.</p>
<ul>
<li>
<code>x</code>: El nombre del data frame o matriz a exportar.<br>
</li>
<li>
<code>file</code>: El nombre, extensión y ruta del archivo creado con esta función. Si sólo se escribe el nombre del archivo, este será creado en el directorio de trabajo.<br>
</li>
<li>
<code>sep</code>: El carácter que se usará como separador de columnas.<br>
</li>
<li>
<code>row.names</code>: Si se desea incluir el nombre de los renglones en el objeto al exportarlo, se establece este argumento como <code>TRUE</code>. En general, es recomendable fijarlo como <code>FALSE</code>, para conservar una estructura tabular más fácil de leer.<br>
</li>
<li>
<code>col.names</code>: Si se desea que el archivo incluya los nombres de las columnas en el objeto, se establece este argumento como <code>TRUE</code>. Es recomendable fijarlo como <code>TRUE</code> para evitar la necesidad de almacenar los nombres de columna en documentos distintos.</li>
</ul>
<p>Se pueden consultar todos los argumentos de esta función ejecutando <code><a href="https://rdrr.io/r/utils/write.table.html">?write.table</a></code>.</p>
<p>Se prueba exportando el objeto <code>iris</code> a un documento de texto llamado <strong>iris.txt</strong> a el directorio de trabajo, usando como separador la coma, con nombres de columnas y sin nombre de renglones.</p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iris</span>, file <span class="op">=</span> <span class="st">"Bases/iris.txt"</span>, sep <span class="op">=</span> <span class="st">","</span>, </span>
<span>            row.names <span class="op">=</span> <span class="cn">FALSE</span>, col.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Se importa el archivo que se han creado usando <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>.</p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/iris.txt"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris_txt</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>También se pueden exportar datos a archivos con extensión <strong>.csv</strong> con la función <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code>.</p>
<p>Se desea exportar <code>iris</code> como un documento <strong>.csv</strong>. En este caso, sólo se especifica que no se desean guardar los nombres de los renglones con <code>row.names = FALSE</code>.</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iris</span>, file <span class="op">=</span> <span class="st">"Bases/iris.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<p>Se importa el archivo creado.</p>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"Bases/iris.csv"</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris_csv</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div id="listas-2" class="section level3" number="12.4.2">
<h3>
<span class="header-section-number">12.4.2</span> Listas<a class="anchor" aria-label="anchor" href="#listas-2"><i class="fas fa-link"></i></a>
</h3>
<p>La manera más sencilla de exportar listas es guardarlas en archivos RDS. Este es un tipo de archivo nativo de R se puede almacenar cualquier objeto a un archivo en el disco duro.</p>
<p>Además, RDS comprime los datos que almacena, por lo que ocupa menos espacio en disco duro que otros tipos de archivos, aunque contengan la misma información.</p>
<p>Para exportar un objeto a un archivo RDS, se usa la función <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code> que siempre pide dos argumentos:</p>
<ul>
<li>
<code>object</code>: El nombre del objeto a exportar.</li>
<li>
<code>file</code>: El nombre y ruta del archivo que se crearan. Los archivos deben tener la extensión <strong>.rds</strong>. Si no se especifica una ruta completa, el archivo será creado en el directorio de trabajo.</li>
</ul>
<p>Se crea una lista de ejemplo que contiene dos vectores y dos matrices</p>
<div class="sourceCode" id="cb266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi_lista</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"a"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                 <span class="st">"b"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>                 <span class="st">"c"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                 <span class="st">"d"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="va">mi_lista</span></span>
<span><span class="co">## $a</span></span>
<span><span class="co">## [1]  TRUE FALSE  TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $b</span></span>
<span><span class="co">## [1] "a" "b" "c"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $c</span></span>
<span><span class="co">##      [,1] [,2]</span></span>
<span><span class="co">## [1,]    1    3</span></span>
<span><span class="co">## [2,]    2    4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $d</span></span>
<span><span class="co">##      [,1] [,2] [,3]</span></span>
<span><span class="co">## [1,]    1    3    5</span></span>
<span><span class="co">## [2,]    2    4    6</span></span></code></pre></div>
<p>Aunque se pueden intentar <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> para exportar listas, por lo general se obtiene un error como resultado.</p>
<p>Se trata de exportar la lista anterior como un archivo <strong>.txt</strong>.</p>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mi_lista</span>, file <span class="op">=</span> <span class="st">"Bases/mi_lista.txt"</span><span class="op">)</span></span>
<span><span class="co">## Error in (function (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, : arguments imply differing number of rows: 3, 2</span></span></code></pre></div>
<p>Se usa la función <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code> para exportar al archivo <strong>mi_lista.rds</strong>.</p>
<div class="sourceCode" id="cb268"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">mi_lista</span>, file <span class="op">=</span> <span class="st">"Bases/mi_lista.rds"</span><span class="op">)</span></span></code></pre></div>
<p>Si se desea importar un archivo RDS a R, se usa la función <code><a href="https://rdrr.io/r/base/readRDS.html">readRDS()</a></code>, indicando la ruta en la que se encuentra el archivo que se desea.</p>
<p>Se intenta importar el archivo <strong>mi_lista.rds</strong>.</p>
<div class="sourceCode" id="cb269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi_lista_importado</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"Bases/mi_lista.rds"</span><span class="op">)</span></span></code></pre></div>
<p>El resultado de la importación:</p>
<div class="sourceCode" id="cb270"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi_lista_importado</span></span>
<span><span class="co">## $a</span></span>
<span><span class="co">## [1]  TRUE FALSE  TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $b</span></span>
<span><span class="co">## [1] "a" "b" "c"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $c</span></span>
<span><span class="co">##      [,1] [,2]</span></span>
<span><span class="co">## [1,]    1    3</span></span>
<span><span class="co">## [2,]    2    4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $d</span></span>
<span><span class="co">##      [,1] [,2] [,3]</span></span>
<span><span class="co">## [1,]    1    3    5</span></span>
<span><span class="co">## [2,]    2    4    6</span></span>
<span><span class="co"># El resultado es una lista, al igual que el objeto original</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mi_lista</span><span class="op">)</span></span>
<span><span class="co">## [1] "list"</span></span></code></pre></div>
<p>Los objetos importados usando un archivo <code>RDS</code> conservan los tipos y clases que tenían originalmente, lo cual previene pérdida de información.</p>
</div>
</div>
<div id="hojas-de-cálculo-de-excel" class="section level2" number="12.5">
<h2>
<span class="header-section-number">12.5</span> Hojas de cálculo de Excel<a class="anchor" aria-label="anchor" href="#hojas-de-c%C3%A1lculo-de-excel"><i class="fas fa-link"></i></a>
</h2>
<p>Un formato usado con mucha frecuencia para almacenar archivos son las hojas de cálculo, en particular las generadas por el paquete <a href="https://products.office.com/es-mx/excel"><em>Microsoft Excel</em></a>.</p>
<p>R <em>base</em> no tiene una función para importar archivos almacenados en archivos con extensión <strong>.xsl</strong> y <strong>.xslx</strong>, creados con <em>Excel</em>.</p>
<p>Para importar datos desde este tipo de archivos, se necesitan instalar el paquete <strong>readxl</strong>, que contiene funciones específicas para realizar esta tarea.</p>
<p>Ae usa la función <code>installpackages()</code>, en caso de que no se tenga.</p>
<div class="sourceCode" id="cb271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span></code></pre></div>
<p>Ya instalado, se manda a llamar el paquete <code>readxl</code> a la sesión de trabajo.</p>
<div class="sourceCode" id="cb272"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span></code></pre></div>
<p>Se usaran, principalmente dos funciones de este paquete.</p>
<ul>
<li>
<code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code>: Para importar archivos <strong>.xls</strong> y <strong>xlsx</strong>.<br>
</li>
<li>
<code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code>: Para obtener los nombres de las pestañas en una hoja de cálculo de <em>Excel</em>.</li>
</ul>
<p>Para probar estas funciones, se descarga una hoja de cálculo de prueba. Nota que se han establecido el argumento <code>mode = "wb"</code> para asegurar que el archivo se descargue correctamente.</p>
<div class="sourceCode" id="cb273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://github.com/jboscomendoza/r-principiantes-bookdown/raw/master/datos/data_frames.xlsx"</span>, </span>
<span>  destfile <span class="op">=</span> <span class="st">"Bases/data_frames.xlsx"</span>, </span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span></span>
<span><span class="op">)</span> </span></code></pre></div>
<p>Si se necesita leer las primeras cinco líneas de <strong>data_frames.xlsx</strong>, se confrima que este es un archivo que no tiene forma rectangular, de tabla.</p>
<div class="sourceCode" id="cb274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="st">"Bases/data_frames.xlsx"</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning in readLines("Bases/data_frames.xlsx", n = 5): line 1 appears to contain an embedded nul</code></pre>
<pre><code>## Warning in readLines("Bases/data_frames.xlsx", n = 5): incomplete final line found on 'Bases/data_frames.xlsx'</code></pre>
<pre><code>## [1] "PK\003\004\024"                                                                                                                                                                                                           
## [2] "\177߉YTU,B \xf5\x92(\xb1\xe7m\xf6L\177\xb8j\xead\t\001\x8d\xb3\xb9\xe8f\035\x91\x80-\x9c6v\x96\x8b\xaf\xc9{\xfa$\022$e\xb5\xaa\x9d\x85\\\xac\001\xc5pp\177ן\xac=`\xc2\xd5\026sQ\021\xf9g)\xb1\xa8\xa0Q\x989\017\x96WJ\027"</code></pre>
<p>En caso de que se tenga instalado <em>Excel</em> o algún otro programa compatible con archivos de hoja de cálculo, como <em>LibreOffice Calc</em> o <em>Number</em>, se pueden pedir a R que abra este archivo con <code><a href="https://rdrr.io/r/base/file.show.html">file.show()</a></code>. De este modo se pueden explorar su contenido.</p>
<div class="sourceCode" id="cb278"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html">file.show</a></span><span class="op">(</span><span class="st">"Bases/data_frames.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>La función <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code> devuelve el nombre de las pestañas como un vector.</p>
<div class="sourceCode" id="cb279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a></span><span class="op">(</span><span class="st">"Bases/data_frames.xlsx"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "iris"  "trees"</code></pre>
<p>Este archivo tiene dos pestañas, llamadas <strong>iris</strong> y <strong>trees</strong>.</p>
<p>Se intentará importar la pestaña <strong>iris</strong> con <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code>. Esta función tiene los siguientes argumentos principales.</p>
<ul>
<li>
<code>path</code>: La ruta del archivo a importar. Si no se especifica una ruta completa, será buscado en el directorio de trabajo.</li>
<li>
<code>sheet</code>: El nombre de la pestaña a importar. Si no se especifica este argumento, <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> intentará leer la primera pestaña de la hoja de cálculo.<br>
</li>
<li>
<code>range</code>: Cadena de texto con el rango de celdas a importar, escrito con el formato usado en <em>Excel</em>. Por ejemplo, “A1:B:10”.<br>
</li>
<li>
<code>col_names</code>: Con este argumento se indica si la pestaña que se va a importar tiene encabezados para usar como nombres de columna. Por defecto su valor es <code>TRUE</code>. Si no tenemos encabezados, se pueden dar un vector con nombres para asignar a las columnas.</li>
</ul>
<p>Se puede consultar todos los argumentos de esta función ejecutando <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">?read_excel</a></code>.</p>
<p>Se utiliza la función <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code>, como ejemplo:</p>
<div class="sourceCode" id="cb281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_excel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"Bases/data_frames.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"iris"</span><span class="op">)</span></span></code></pre></div>
<p>El resultado es un data frame.</p>
<div class="sourceCode" id="cb282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris_excel</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
## 1          5.1         3.5          1.4         0.2 setosa 
## 2          4.9         3            1.4         0.2 setosa 
## 3          4.7         3.2          1.3         0.2 setosa 
## 4          4.6         3.1          1.5         0.2 setosa 
## 5          5           3.6          1.4         0.2 setosa 
## 6          5.4         3.9          1.7         0.4 setosa</code></pre>
<p>Si los datos en la hoja de cálculo tienen forma de tabla, <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> no se tendrá problemas para importarlos. Cuando este no es el caso, se usa el argumento <code>range</code> para extraer sólo la información que interesa.</p>
<p>Se intenta importar la pestaña <strong>trees</strong>.</p>
<div class="sourceCode" id="cb284"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trees_excel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"Bases/data_frames.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"trees"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## New names:
## • `` -&gt; `...2`
## • `` -&gt; `...3`
## • `` -&gt; `...4`
## • `` -&gt; `...5`
## • `` -&gt; `...6`</code></pre>
<div class="sourceCode" id="cb286"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Resultado</span></span>
<span><span class="va">trees_excel</span></span></code></pre></div>
<pre><code>## # A tibble: 34 × 6
##    `Datos trees`  ...2  ...3  ...4 ...5  ...6                                                   
##    &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt; &lt;chr&gt;                                                  
##  1 &lt;NA&gt;           NA      NA  NA   NA    &lt;NA&gt;                                                   
##  2 &lt;NA&gt;            8.3    70  10.3 NA    &lt;NA&gt;                                                   
##  3 &lt;NA&gt;            8.6    65  10.3 NA    &lt;NA&gt;                                                   
##  4 &lt;NA&gt;            8.8    63  10.2 NA    Los nombres de las variables son: Girth, Height, Volume
##  5 &lt;NA&gt;           10.5    72  16.4 NA    &lt;NA&gt;                                                   
##  6 &lt;NA&gt;           10.7    81  18.8 NA    &lt;NA&gt;                                                   
##  7 &lt;NA&gt;           10.8    83  19.7 NA    &lt;NA&gt;                                                   
##  8 &lt;NA&gt;           11      66  15.6 NA    &lt;NA&gt;                                                   
##  9 &lt;NA&gt;           11      75  18.2 NA    &lt;NA&gt;                                                   
## 10 &lt;NA&gt;           11.1    80  22.6 NA    &lt;NA&gt;                                                   
## # … with 24 more rows</code></pre>
<p>Los resultados no lucen correctamente porque los datos en la pestaña no tienen forma de tabla.</p>
<p>Se ajustan los argumentos de <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> para leer correctamente la información de la pestaña. Al explorar manualmente el archivo <strong>data.frames.xlsx</strong>, se pueden localizar el rango en el que se encuentran los datos (de las celdas B3 a D33) y los nombres de las columnas (Girth, Height y Volume).</p>
<p>Se prueba importar de nuevo con esta información.</p>
<div class="sourceCode" id="cb288"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trees_excel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"Bases/data_frames.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"trees"</span>, </span>
<span>                          range <span class="op">=</span> <span class="st">"B3:D33"</span>, </span>
<span>                          col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Girth"</span>, <span class="st">"Height"</span>, <span class="st">"Volume"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Resultado</span></span>
<span><span class="va">trees_excel</span></span></code></pre></div>
<pre><code>## # A tibble: 31 × 3
##    Girth Height Volume
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1   8.3     70   10.3
##  2   8.6     65   10.3
##  3   8.8     63   10.2
##  4  10.5     72   16.4
##  5  10.7     81   18.8
##  6  10.8     83   19.7
##  7  11       66   15.6
##  8  11       75   18.2
##  9  11.1     80   22.6
## 10  11.2     75   19.9
## # … with 21 more rows</code></pre>
<p>Esta vez se han tenido éxito y los datos importados son los correctos.</p>
<p>El paquete <strong>readxl</strong> tiene más funciones para trabajar con hojas de cálculo además de <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> y <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code>.Se puede conocer más sobre ellas en la documentación de <code>readxl</code>, llamando <code><a href="https://readxl.tidyverse.org/reference">help(package = "readxl")</a></code>.</p>
</div>
<div id="datos-de-paquetes-estadísticos-comerciales-spss-sas-y-stata" class="section level2" number="12.6">
<h2>
<span class="header-section-number">12.6</span> Datos de paquetes estadísticos comerciales (<code>SPSS</code>, <code>SAS</code> y <code>STATA</code>)<a class="anchor" aria-label="anchor" href="#datos-de-paquetes-estad%C3%ADsticos-comerciales-spss-sas-y-stata"><i class="fas fa-link"></i></a>
</h2>
<p>En ciertas disciplinas, el uso de determinados paquetes estadísticos comerciales es sumamente común. Si por ejemplo, en Psicología el paquete <a href="https://www.ibm.com/products/spss-statistics"><em>SPSS Statistics</em></a> de IBM es el paquete estadístico comercial más usado. Si se es psicólogo o psicóloga, es altamente probable encontrar datos contenidos en archivos con extensión <strong>.sav</strong>, el tipo de archivo nativo de <strong>SPSS Statistics</strong>.</p>
<p>Por lo tanto, es conveniente importar y exportar datos almacenados en archivos compatibles con paquetes estadísticos comerciales, pues esto nos permitirá usar datos ya existentes compatibles con ellos y colaborar con otras personas.</p>
<p>Para este fin, se usa el paquete <code>haven</code>.</p>
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"haven"</span><span class="op">)</span></span></code></pre></div>
<p>Para usar las funciones de <strong>haven</strong>, se caraga a la sesión de trabajo.</p>
<div class="sourceCode" id="cb291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span></code></pre></div>
<p>Las siguientes funciones de del paquete <code>haven</code> son usadas para importar datos. Todas estas funciones piden como argumento <code>file</code> la ruta y nombre del archivo a importar, si no se especifica ruta, será buscado en el directorio de trabajo.</p>
<ul>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_spss.html">read_spss()</a></code>: <em>SPSS Statistics</em>, archivos con extensión <strong>sav</strong>, <strong>zsav</strong> y <strong>por</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_spss.html">read_sav()</a></code>: <em>SPSS Statistics</em>, sólo archivos <strong>sav</strong>, <strong>zsav</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_sas.html">read_sas()</a></code>: <em>SAS</em>, archivos <strong>sas7bdat</strong>.</li>
<li>
<code>read_xpt</code>: <em>SAS</em>, archivos <strong>xpt</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_dta.html">read_stata()</a></code>: <em>Stata</em>, archivos <strong>dta</strong>.</li>
</ul>
<p>Todas importan los datos como un data frame.</p>
<p>También se pueden exportar los data frames creados en R como archivos compatibles con estos programas con las siguientes funciones. Todas piden el argumento <code>file</code>, con la ruta y nombre del archivo a crear. Es muy importante que poner como nombre de archivo uno con la extensión correcta para cada paquete.</p>
<ul>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_spss.html">write_sav()</a></code>: <em>SPSS Statistics</em>, archivos <strong>sav</strong>, <strong>zsav</strong> o <strong>por</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_sas.html">write_sas()</a></code>: <em>SAS</em>, archivos <strong>sas7bda</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_xpt.html">write_xpt()</a></code>: <em>SAS</em>, archivos <strong>xpt</strong>.</li>
<li>
<code><a href="https://haven.tidyverse.org/reference/read_dta.html">write_dta()</a></code>: <em>Stata</em>, archivos <strong>dta</strong>.</li>
</ul>
<p>Como siempre, se pueden leer sobre las demás funciones en el paquete <strong>haven</strong> en su documentación, llamando <code><a href="https://haven.tidyverse.org/reference">help(package = "haven")</a></code>.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="directorio-de-trabajo.html"><span class="header-section-number">11</span> Directorio de trabajo</a></div>
<div class="next"><a href="dplyr-data-manipulation.html"><span class="header-section-number">13</span> Dplyr (Data Manipulation)</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#importar-y-exportar-datos"><span class="header-section-number">12</span> Importar y exportar datos</a></li>
<li><a class="nav-link" href="#descargando-datos"><span class="header-section-number">12.1</span> Descargando datos</a></li>
<li>
<a class="nav-link" href="#tablas-datos-rectangulares"><span class="header-section-number">12.2</span> Tablas (datos rectangulares)</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#archivos-csv"><span class="header-section-number">12.2.1</span> Archivos CSV</a></li></ul>
</li>
<li><a class="nav-link" href="#archivos-con-una-estructura-desconocida"><span class="header-section-number">12.3</span> Archivos con una estructura desconocida</a></li>
<li>
<a class="nav-link" href="#exportar-datos"><span class="header-section-number">12.4</span> Exportar datos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-frames-y-matrices"><span class="header-section-number">12.4.1</span> Data frames y matrices</a></li>
<li><a class="nav-link" href="#listas-2"><span class="header-section-number">12.4.2</span> Listas</a></li>
</ul>
</li>
<li><a class="nav-link" href="#hojas-de-c%C3%A1lculo-de-excel"><span class="header-section-number">12.5</span> Hojas de cálculo de Excel</a></li>
<li><a class="nav-link" href="#datos-de-paquetes-estad%C3%ADsticos-comerciales-spss-sas-y-stata"><span class="header-section-number">12.6</span> Datos de paquetes estadísticos comerciales (SPSS, SAS y STATA)</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/12-Cap12.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/12-Cap12.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Tutorial Example</strong>" was written by CONAPO. It was last built on 2022-09-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
