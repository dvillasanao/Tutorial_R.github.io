<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 10 Apply family | R Tutorial Example</title>
<meta name="author" content="CONAPO">
<meta name="description" content="La familia apply en R es un paquete integrado la base de R que permite evitar los bucles al explorar y analizar datos. La aplicación de estas funciones son increíblemente realmente útiles para...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 10 Apply family | R Tutorial Example">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/dvillasanao/R_Tutorial/apply-family.html">
<meta property="og:description" content="La familia apply en R es un paquete integrado la base de R que permite evitar los bucles al explorar y analizar datos. La aplicación de estas funciones son increíblemente realmente útiles para...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 10 Apply family | R Tutorial Example">
<meta name="twitter:description" content="La familia apply en R es un paquete integrado la base de R que permite evitar los bucles al explorar y analizar datos. La aplicación de estas funciones son increíblemente realmente útiles para...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Tutorial Example</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introducción</a></li>
<li><a class="" href="rmarkdown-1.html"><span class="header-section-number">2</span> RMarkdown</a></li>
<li><a class="" href="chunks.html"><span class="header-section-number">3</span> Chunks</a></li>
<li><a class="" href="objetos.html"><span class="header-section-number">4</span> Tipos de variables</a></li>
<li><a class="" href="propiedades-de-los-objetos.html"><span class="header-section-number">5</span> Propiedades de los objetos</a></li>
<li><a class="" href="coerci%C3%B3n-de-objetos.html"><span class="header-section-number">6</span> Coerción de objetos</a></li>
<li><a class="" href="tipos-de-datos.html"><span class="header-section-number">7</span> Tipos de datos</a></li>
<li><a class="" href="funbasicas.html"><span class="header-section-number">8</span> Funciones básicas de R</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">9</span> Loops</a></li>
<li><a class="active" href="apply-family.html"><span class="header-section-number">10</span> Apply family</a></li>
<li><a class="" href="directorio-de-trabajo.html"><span class="header-section-number">11</span> Directorio de trabajo</a></li>
<li><a class="" href="importar-y-exportar-datos.html"><span class="header-section-number">12</span> Importar y exportar datos</a></li>
<li><a class="" href="dplyr-data-manipulation.html"><span class="header-section-number">13</span> Dplyr (Data Manipulation)</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">14</span> ggplot</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="apply-family" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Apply family<a class="anchor" aria-label="anchor" href="#apply-family"><i class="fas fa-link"></i></a>
</h1>
<p>La familia <code>apply</code> en R es un paquete integrado la base de R que permite evitar los bucles al explorar y analizar datos. La aplicación de estas funciones son increíblemente realmente útiles para trabajar con datos en R, además de que simplifican en trabajo.</p>
<p>La estructura de esta función es la siguiente.</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">MARGIN</span>, <span class="va">FUN</span><span class="op">)</span></span></code></pre></div>
<p>Las apicaciones de las funciones de la familia son:</p>
<p>-<code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> : recorre una lista y aplica una función a cada elemento de esa lista (lapply devuelve una lista).<br>
-<code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> : una versión de lapply que simplifica los resultados (sapply devuelve un vector o matriz si es posible).<br>
-<code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code>: recorre los márgenes (filas o columnas) de una matriz, útil para tomar resúmenes de matrices o matrices de mayor dimensión.<br>
-<code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> : abreviatura de “aplicación de tabla”. Aplica una función sobre subconjuntos de un vector.</p>
<div id="apply" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Apply:<a class="anchor" aria-label="anchor" href="#apply"><i class="fas fa-link"></i></a>
</h2>
<p>La función <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code> tiene tres argumentos:</p>
<ul>
<li><p><code>X</code>: Una matriz o un objeto que pueda coercionarse a una matriz, generalmente, un data frame.</p></li>
<li><p><code>MARGIN</code>: La dimensión (margen) que agrupará los elementos de la matriz <code>X</code>, para aplicarles una función.</p></li>
<li>
<p>Son identificadas con números,</p>
<ul>
<li>
<code>1</code> son renglones y,<br>
</li>
<li>
<code>2</code> son colummnas.</li>
</ul>
</li>
<li><p><code>FUN</code>: La función que aplicaremos a la matriz <code>X</code> en su dimensión <code>MARGIN</code>.</p></li>
</ul>
<div id="ejemplo-20" class="section level3 unnumbered">
<h3>Ejemplo<a class="anchor" aria-label="anchor" href="#ejemplo-20"><i class="fas fa-link"></i></a>
</h3>
<p>Por ejemplo, podemos usar <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code> para obtener la sumatoria de los elementos de una matriz, por renglón.</p>
<p>Se crea una matriz de cuatro renglones.</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">16</span>, nrow <span class="op">=</span> <span class="fl">4</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> </span></code></pre></div>
<p>Se aplica la función <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code>, usando la función <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> en el argumento <code>FUN</code>, nota que sólo necesitamos el nombre de la función, sin paréntesis.</p>
<p>Por último, damos el argumento <code>MARGIN = 1</code>, para aplicar la función por renglón.</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">## [1] 28 32 36 40</span></span></code></pre></div>
<p>Esto es equivalente a hacer lo siguiente.</p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## [1] 28</span></span></code></pre></div>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">## [1] 28</span></span>
<span><span class="co">## [1] 32</span></span>
<span><span class="co">## [1] 36</span></span>
<span><span class="co">## [1] 40</span></span></code></pre></div>
<p>Si cambiamos el argumento <code>MARGIN</code> de <code>MARGIN = 1</code> a <code>MARGIN = 2</code>, entonces la función se aplicará por columna.</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">## [1] 10 26 42 58</span></span></code></pre></div>
<p>En este caso, la función <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> ha sido aplicado a cada elementos de nuestra matriz, los elementos son las columnas, y ahora cada columna es un vector.</p>
</div>
<div id="fun" class="section level3" number="10.1.1">
<h3>
<span class="header-section-number">10.1.1</span> FUN<a class="anchor" aria-label="anchor" href="#fun"><i class="fas fa-link"></i></a>
</h3>
<p>El parametro <code>FUN</code> es un argumento que nos pide el nombre de una función que se se aplicarla a todos los elementos de nuestra matriz. Algunas de las funciones mayormente usadas son:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code></li>
<li>
<code>sd(</code>)</li>
<li><code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code></li>
<li><code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code></li>
</ul>
<p><strong>¿Qué pasa si deseamos utilizar los demás argumentos de una función con apply?</strong> En los casos en los que una función tiene más de un argumento, asignamos los valores de estos del nombre de la función, separados por comas, usando sus propios nombres (a este procedimiento es al que se refiere el argumento <code>...</code> descrito en la documentación de apply). <code><a href="https://rdrr.io/r/base/apply.html">?apply</a></code></p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.33</span>, <span class="fl">.66</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##     [,1] [,2]  [,3]  [,4]</span></span>
<span><span class="co">## 33% 1.99 5.99  9.99 13.99</span></span>
<span><span class="co">## 66% 2.98 6.98 10.98 14.98</span></span></code></pre></div>
<p>Si además deseamos que el resultado aparezca sin nombres, entonces definimos el valor del argumento names de la misma manera.</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, <span class="fl">2</span>, <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.33</span>, <span class="fl">.66</span><span class="op">)</span>, names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">##      [,1] [,2]  [,3]  [,4]</span></span>
<span><span class="co">## [1,] 1.99 5.99  9.99 13.99</span></span>
<span><span class="co">## [2,] 2.98 6.98 10.98 14.98</span></span></code></pre></div>
<p>De este modo es posible aplicar funciones complejas que aceptan múltiples argumentos, con la ventaja que usamos pocas líneas de código.</p>
</div>
</div>
<div id="sappy" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Sappy<a class="anchor" aria-label="anchor" href="#sappy"><i class="fas fa-link"></i></a>
</h2>
<p>La función <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> en R es una función integrada que aplica una función a todos los elementos de entrada. El método <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> toma una lista, un vector o un data.frame como argumento y devuelve un vector o una matriz.</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">FUN</span>, <span class="va">...</span>, simplify <span class="op">=</span> <span class="cn">TRUE</span>, USE.NAMES <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Para usar la función <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> en R, se deberá especificar la lista o el vector sobre el que desea iterar en el primer argumento y la función que desea aplicar a cada elemento del vector en el segundo.</p>
<p>Teniendo en cuenta que se puede usar una función de cualquier paquetería|repositorio o bien puede ser función personalizada :</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="va">sqrt</span><span class="op">)</span> </span>
<span><span class="co">## [1] 1.000000 1.414214 1.732051 2.000000</span></span>
<span></span>
<span><span class="co"># Es equivalente a:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">)</span>  </span>
<span><span class="co">## [1] 1.000000 1.414214 1.732051 2.000000</span></span>
<span></span>
<span><span class="co"># También es equivalente a: </span></span>
<span><span class="co"># Also equivalent to:</span></span>
<span><span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="va">my_fun</span><span class="op">)</span> </span>
<span><span class="co">## [1] 1.000000 1.414214 1.732051 2.000000</span></span></code></pre></div>
<p>La tercera función es más compleja de realizar, pero es importante tomar en cuenta que se puede aplicar cualquier función que uno desee.</p>
<p>Consideramos, por ejemplo, que se desea calcular el cuadrado de los elementos de un vector. Usando la función <code>for()</code>.</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">out</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">^</span> <span class="fl">2</span></span>
<span><span class="op">}</span></span>
<span><span class="va">out</span></span>
<span><span class="co">##  [1]   1   4   9  16  25  36  49  64  81 100</span></span></code></pre></div>
<p>Sin embargo, con la función <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> se puede escribir todo en una sola línea de código para obtener el mismo resultado:</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="va">i</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">##  [1]   1   4   9  16  25  36  49  64  81 100</span></span></code></pre></div>
<div id="ejemplo-21" class="section level3 unnumbered">
<h3>Ejemplo<a class="anchor" aria-label="anchor" href="#ejemplo-21"><i class="fas fa-link"></i></a>
</h3>
<p>Si se tiene una lista en lugar de un vector, los pasos son análogos, pero se tiene en cuenta que la función se aplicará a los elementos de la lista. En el siguiente ejemplo se cálcula el número de componentes de cada elemento de la lista con la función <code><a href="https://rdrr.io/r/base/length.html">length()</a></code>.</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">List</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>A <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, B <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">20</span>, C <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">List</span>, <span class="va">length</span><span class="op">)</span></span>
<span><span class="co">##  A  B  C </span></span>
<span><span class="co">##  5 15  1</span></span></code></pre></div>
<p>La función <code>sapply</code> en R permite usar argumentos adicionales a la función que está aplicando después de la función a usar. Se considera una lista con valor <code>NA</code>:</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="cn">NA</span>, <span class="fl">9</span> , <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Si se aplica la función <code>sum</code> a cada elemento de la lista, devolverá la suma de los componentes de cada elemento, pero como el segundo elemento contiene un valor <code>NA</code>, la suma también devuelve un valor <code>NA</code>.</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">my_list</span>, <span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">##  A  B </span></span>
<span><span class="co">## 11 NA</span></span></code></pre></div>
<p>Como la función <code>sum</code> tiene un argumento adicional llamado <code>na.rm</code>, se puede configurarlo la siguiente manera para eliminar los valores <code>NA</code>. Véase <code><a href="https://rdrr.io/r/base/sum.html">?sum</a></code>.</p>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">my_list</span>, <span class="va">sum</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##  A  B </span></span>
<span><span class="co">## 11 22</span></span></code></pre></div>
<p>En consecuencia, el valor <code>NA</code> no se tiene en cuenta y la función devuelve la suma de los valores finitos.</p>
</div>
</div>
<div id="lapply" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Lapply<a class="anchor" aria-label="anchor" href="#lapply"><i class="fas fa-link"></i></a>
</h2>
<p>La función <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> es un caso especial de <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code>, diseñado para aplicar funciones a todos los elementos de una lista. La <strong>l</strong> de su nombre se refiere, precisamente, a <code>lista</code>.</p>
<p>Esta función intentará coercionar a una lista el objeto que demos como argumento y después aplicará una función a todos sus elementos.</p>
<p>La estructura de esta función es:</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">FUN</span><span class="op">)</span></span></code></pre></div>
<p>En donde:</p>
<ul>
<li>
<code>X</code> es una lista o un objeto coercionable a una lista.</li>
<li>
<code>FUN</code> es la función a aplicar.</li>
</ul>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 20.08554</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 148.4132</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 1096.633</span></span>
<span></span>
<span><span class="co"># Se puede expresar de esta manera</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 2.718282</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 7.389056</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 20.08554</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[4]]</span></span>
<span><span class="co">## [1] 54.59815</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[5]]</span></span>
<span><span class="co">## [1] 148.4132</span></span></code></pre></div>
</div>
<div id="sapply-vs-lapply" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> sapply vs lapply<a class="anchor" aria-label="anchor" href="#sapply-vs-lapply"><i class="fas fa-link"></i></a>
</h2>
<p>La diferencia entre las funciones <code>lapply</code> y <code>sapply</code> es el tipo de resultado que arroja cada función:</p>
<ul>
<li>
<code>sapply</code> <span class="math inline">\(\rightarrow\)</span> <code>vector</code>,<br>
</li>
<li>
<code>lapply</code> <span class="math inline">\(\rightarrow\)</span> <code>lista</code>.</li>
</ul>
<p>En ambos casos depende mucho el contexto en el que se use una función u otra, alguna veces es mejor trabajar con listas cuando se intenta hacer manipulación de datos <code>data mining</code> y guardar los resultados en listas.<br>
Si se considera que se quiere calcular la exponencial de tres números. Como primer caso, si usa la función <code>sapply</code>, se obtendrá un vector como salida. O bien, si se usa la función <code>lapply</code>, se obtendrá una lista donde cada elemento corresponde a los componentes del vector anterior.</p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span></span>
<span><span class="co">## [1]   20.08554  148.41316 1096.63316</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 20.08554</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 148.4132</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 1096.633</span></span></code></pre></div>
<p>Sin embargo, por un lado, si establece el argumento <code>simplify = FALSE</code> dentro de la función <code>sapply</code> obtendrá el mismo resultado que la función <code>lapply</code>. Teniendo en cuenta que esto es lo mismo que usar la función <code><a href="https://rdrr.io/r/base/list.html">as.list()</a></code>:</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 20.08554</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 148.4132</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 1096.633</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span><span class="op">)</span> <span class="co"># Equivalent</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 20.08554</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 148.4132</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 1096.633</span></span></code></pre></div>
<p>Por otro lado, se puede convertir la salida de la función <code>lapply</code> al mismo tipo de salida de la función <code>sapply</code> con las funciones <code>simplify2array</code> o <code><a href="https://rdrr.io/r/base/unlist.html">unlist()</a></code>:</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">simplify2array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1]   20.08554  148.41316 1096.63316</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span><span class="op">)</span> <span class="co"># Equivalent</span></span>
<span><span class="co">## [1]   20.08554  148.41316 1096.63316</span></span></code></pre></div>
<p>En resumen, las funciones <code>sapply</code> y <code>lapply</code> son casi iguales, pero difieren en la clase de salida.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="loops.html"><span class="header-section-number">9</span> Loops</a></div>
<div class="next"><a href="directorio-de-trabajo.html"><span class="header-section-number">11</span> Directorio de trabajo</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#apply-family"><span class="header-section-number">10</span> Apply family</a></li>
<li>
<a class="nav-link" href="#apply"><span class="header-section-number">10.1</span> Apply:</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ejemplo-20">Ejemplo</a></li>
<li><a class="nav-link" href="#fun"><span class="header-section-number">10.1.1</span> FUN</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sappy"><span class="header-section-number">10.2</span> Sappy</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#ejemplo-21">Ejemplo</a></li></ul>
</li>
<li><a class="nav-link" href="#lapply"><span class="header-section-number">10.3</span> Lapply</a></li>
<li><a class="nav-link" href="#sapply-vs-lapply"><span class="header-section-number">10.4</span> sapply vs lapply</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/10-Cap10.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/10-Cap10.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Tutorial Example</strong>" was written by CONAPO. It was last built on 2022-09-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
